(this["webpackJsonpmaps-exercise"]=this["webpackJsonpmaps-exercise"]||[]).push([[0],{167:function(e,t,n){"use strict";n.r(t);var a,c=n(0),i=n.n(c),r=n(10),o=n.n(r),s=(n(83),n(84),n(18)),l=n.n(s),u=n(19),j=n(7),d=n(25),b=n(5),p=n(8),O=n(51),f=n(20),h=n(9),g=n(46),x=n(6),v=n(29),m=n(23),y=n(50),w=n(2),C=["className","name","onBlur","label","invalid","helpText","changeOptionLabel","changeOptionValue"],k=Object(h.a)(m.a)(a||(a=Object(p.a)(["\n  ","\n"])),(function(e){var t=e.color,n=e.invalid;return"\n    margin-left: 16px;\n    display: inline-block;\n    color: ".concat(n?"red":t,";\n  ")}));var S,L,R,D,T,I,M=function(e){var t,n=e.className,a=e.name,i=e.onBlur,r=e.label,o=e.invalid,s=e.helpText,l=e.changeOptionLabel,u=e.changeOptionValue,d=Object(v.a)(e,C),p=Object(c.useState)(!1),O=Object(b.a)(p,2),f=O[0],h=O[1];return Object(w.jsxs)("div",{className:n,children:[r&&Object(w.jsx)(k,{use:"caption",color:f?"#6200ee":"#7f7f7f",invalid:o,children:r}),Object(w.jsx)(y.a,Object(j.a)({styles:(t=o,{valueContainer:function(e){return Object(j.a)(Object(j.a)({},e),{},{minHeight:"55px"})},control:function(e,n){return Object(j.a)(Object(j.a)(Object(j.a)({},e),{},{marginRight:8,marginLeft:8},t&&{borderColor:"red",boxShadow:n.menuIsOpen?"0 0 0 1px red inset":"0"}),{},{"&:hover":{borderColor:t?"red":n.isFocused?e.borderColor:"#000000"}})},placeholder:function(e){return Object(j.a)(Object(j.a)({},e),{},{color:t?"red":"#808080"})},menuPortal:function(e){return Object(j.a)(Object(j.a)({},e),{},{zIndex:10})}}),components:{DropdownIndicator:null},menuIsOpen:!1,theme:function(e){return Object(j.a)(Object(j.a)({},e),{},{colors:Object(j.a)(Object(j.a)({},e.colors),{},{primary:"#6200ee",danger:"#b00020"})})},onFocus:function(){return h(!0)},onBlur:function(e){e.target.name=a,i&&i(e),h(!1)},getOptionLabel:function(e){return e[l]},getOptionValue:function(e){return e[u]}},d)),Object(w.jsx)(k,{use:"caption",color:"#7f7f7f",invalid:o,children:s||""})]})},A=["location","mapsApi","onRegisterRestaurant","onClose"],E=h.a.div(S||(S=Object(p.a)(["\n  display: flex;\n  flex-direction: column;\n"])));function N(e){var t=Object(c.useState)(""),n=Object(b.a)(t,2),a=n[0],i=n[1],r=Object(c.useState)(""),o=Object(b.a)(r,2),s=o[0],p=o[1],O=Object(c.useState)([]),f=Object(b.a)(O,2),h=f[0],g=f[1],m=Object(c.useState)(""),y=Object(b.a)(m,2),C=y[0],k=y[1],S=Object(c.useState)(""),L=Object(b.a)(S,2),R=L[0],D=L[1],T=e.location,I=e.mapsApi,N=e.onRegisterRestaurant,P=e.onClose,V=Object(v.a)(e,A);return Object(c.useEffect)((function(){function e(){return(e=Object(d.a)(l.a.mark((function e(){var t,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!I||!T){e.next=8;break}return t=new I.maps.Geocoder,e.next=4,t.geocode({location:{lat:null===T||void 0===T?void 0:T.lat,lng:null===T||void 0===T?void 0:T.lng}});case 4:n=e.sent,a=n.results,k(a[0].formatted_address),D(a[0].place_id);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[T,null===T||void 0===T?void 0:T.lat,null===T||void 0===T?void 0:T.lng,I]),Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)(x.d,Object(j.a)(Object(j.a)({onClose:function(e){i(""),g([]),k(""),P&&P(e)}},V),{},{children:[Object(w.jsx)(x.h,{children:"Register Restaurant"}),Object(w.jsx)(x.g,{children:Object(w.jsxs)(E,{children:[Object(w.jsx)(x.l,{name:"name",label:"Name",value:a,onChange:function(e){return i(e.target.value)},outlined:!0,style:{margin:8}}),Object(w.jsx)(M,{isClearable:!0,isMulti:!0,label:"Specialties",placeholder:'Type here then press "tab" key to register specialty',inputValue:s,value:h.map((function(e){return{value:e,label:e}})),onChange:function(e){return g(e)},onInputChange:function(e){p(e)},onKeyDown:function(e){if(s)switch(e.key){case"Tab":p(""),g([].concat(Object(u.a)(h),[s])),e.preventDefault()}},changeOptionLabel:"label",changeOptionValue:"value"}),Object(w.jsxs)("p",{children:[Object(w.jsxs)("span",{children:[Object(w.jsx)("strong",{children:"Address: "})," ",C]}),Object(w.jsx)("br",{})]})]})}),Object(w.jsxs)(x.e,{children:[Object(w.jsx)(x.f,{action:"close",children:"Cancel"}),Object(w.jsx)(x.f,{action:"accept",unelevated:!0,isDefaultAction:!0,onClick:function(){N({name:a,specialties:h,address:C,location:T,visits:0,placeId:R})},children:"Register"})]})]}))})}var P,V,B,G,_={lat:10.3005178,lng:123.8861904},z=h.a.div(L||(L=Object(p.a)(["\n  display: flex;\n  height: 100vh;\n"]))),F=h.a.div(R||(R=Object(p.a)(["\n  height: 100%;\n  width: 100%;\n"]))),K=h.a.div(D||(D=Object(p.a)(["\n  width: 500px;\n  background: white;\n  display: flex;\n  flex-direction: column;\n"]))),W=h.a.div(T||(T=Object(p.a)(["\n  padding: 16px;\n"]))),J=h.a.div(I||(I=Object(p.a)(["\n  padding: 16px;\n"])));function U(e){var t=e.className,n=Object(g.usePosition)(!0),a=n.latitude,i=n.longitude,r=Object(c.useState)(null),o=Object(b.a)(r,2),s=o[0],p=o[1],h=Object(c.useState)([]),v=Object(b.a)(h,2),m=v[0],y=v[1],C=Object(c.useState)([]),k=Object(b.a)(C,2),S=k[0],L=k[1],R=Object(c.useState)(!1),D=Object(b.a)(R,2),T=D[0],I=D[1],M=Object(c.useState)(!1),A=Object(b.a)(M,2),E=A[0],P=A[1],V=Object(c.useState)(null),B=Object(b.a)(V,2),G=B[0],U=B[1],Z=Object(c.useState)(!1),q=Object(b.a)(Z,2),H=q[0],Q=q[1],Y=Object(c.useState)(!1),X=Object(b.a)(Y,2),$=X[0],ee=X[1],te=Object(c.useState)(),ne=Object(b.a)(te,2),ae=ne[0],ce=ne[1],ie=Object(c.useState)(),oe=Object(b.a)(ie,2),se=oe[0],le=oe[1],ue=Object(c.useState)(),je=Object(b.a)(ue,2),de=je[0],be=je[1],pe=Object(c.useState)(),Oe=Object(b.a)(pe,2),fe=Oe[0],he=Oe[1],ge=Object(c.useState)([]),xe=Object(b.a)(ge,2),ve=xe[0],me=xe[1],ye=Object(c.useState)([]),we=Object(b.a)(ye,2),Ce=we[0],ke=we[1],Se=function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s&&s.maps&&ae&&(t=s.maps,Q(!0),ae.textSearch({query:"Restaurants in Cebu City",type:"restaurant"},(function(e,n){var a=[];n===t.places.PlacesServiceStatus.OK&&e.forEach((function(e){a.push(Object(j.a)(Object(j.a)({},e),{},{address:e.formatted_address,name:e.name,location:{lat:e.geometry.location.lat(),lng:e.geometry.location.lng()},placeId:e.place_id}))})),y([].concat(Object(u.a)(m),a)),Q(!1)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Le=function(e){if(s&&s.maps&&s.map){de.setMap(s.map);var t={origin:new s.maps.LatLng(a,i),destination:new s.maps.LatLng(e.location.lat,e.location.lng),travelMode:"DRIVING"};se.route(t,(function(e,t){"OK"===t&&de.setDirections(e)}))}};Object(c.useEffect)((function(){if(ve.length>0){var e=m.filter((function(e){var t=(e.specialties||[]).map((function(e){return e.toLowerCase()}));return!Object(f.isEmpty)(Object(f.intersection)(t,ve))}));ke(e)}else ke([])}),[ve,m]),Object(c.useEffect)((function(){if(fe&&s&&s.map&&s.maps){var e=s.map,t=s.maps;$?(fe.setMap(e),t.event.addListener(fe,"overlaycomplete",(function(e){var n=e.overlay.getBounds(),a=m.filter((function(a){return function(a){switch(e.type){case"circle":var c=e.overlay;return n.contains(a)&&t.geometry.spherical.computeDistanceBetween(c.getCenter(),a)<=c.getRadius();case"rectangle":return e.overlay.getBounds().contains(a)}}(new s.maps.LatLng(a.location.lat,a.location.lng))}));L(Object(u.a)(a)),e.overlay.setMap(null)}))):fe.setMap(null)}}),[$,s,null===s||void 0===s?void 0:s.map,null===s||void 0===s?void 0:s.maps,fe,ae,m]);var Re=$?S:ve.length>0?Ce:m,De=m.map((function(e){return e.specialties})).filter((function(e){return!!e})).reduce((function(e,t){var n=(e||[]).map((function(e){return e.toLowerCase()})),a=(t||[]).map((function(e){return e.toLowerCase()}));return Object(f.union)(n,a)}),[]);return Object(w.jsxs)(z,{className:t,children:[Object(w.jsx)(F,{children:Object(w.jsx)(O.a,{bootstrapURLKeys:{key:"AIzaSyCrWA0GMWAD5vVLl1z6fmwlNgQoTINGm34",libraries:["places","drawing","geometry"]},defaultZoom:14,center:G&&{lat:G.lat,lng:G.lng}||_,onGoogleApiLoaded:function(e){return function(e){if(p(e),e&&e.map&&e.maps){var t=e.map,n=e.maps;ce(new n.places.PlacesService(t)),le(new n.DirectionsService),be(new n.DirectionsRenderer),he(new n.drawing.DrawingManager({drawingMode:n.drawing.OverlayType.CIRCLE,drawingControl:!0,drawingControlOptions:{position:n.ControlPosition.TOP_CENTER,drawingModes:[n.drawing.OverlayType.CIRCLE,n.drawing.OverlayType.RECTANGLE]}}))}}(e)},yesIWantToUseGoogleMapApiInternals:!0,onClick:function(e){T&&(P(!0),U(e))},layerTypes:["TrafficLayer"],options:function(){return{disableDoubleClickZoom:!0}},children:Re&&Re.map((function(e,t){return Object(w.jsx)(re,{restaurant:e,lat:e.location.lat,lng:e.location.lng,onDirectionClick:Le},"restaurant-"+t)}))})}),Object(w.jsxs)(K,{children:[Object(w.jsxs)(x.a,{unelevated:!T,style:{margin:8},onClick:function(){L([]),ee(!1),I(!T)},children:[T?"Turn Off ":"","Plotting Restaruants"]}),T&&Object(w.jsx)(x.m,{use:"caption",style:{textAlign:"center"},children:"To start plotting a restaurant, click anywhere on the map"}),Object(w.jsx)(x.a,{unelevated:!$,style:{margin:8},onClick:function(){L([]),I(!1),ee(!$)},children:$?"Toggle off Draw Mode":"Draw Shape"}),$&&Object(w.jsx)(x.m,{use:"caption",style:{textAlign:"center"},children:"Draw a shape on the map to reveal previously created restaurants"}),Object(w.jsx)("div",{style:{flex:1}}),De&&De.length>0&&Object(w.jsxs)(J,{children:[Object(w.jsx)("h5",{children:"Filters"}),De.map((function(e,t){return Object(w.jsx)(x.b,{onChange:function(t){var n=t.target.checked;!function(e,t){var n=[];n=t?Object(f.union)(ve,[e]):ve.filter((function(t){return t!==e})),me(n)}(e,n)},children:Object(f.capitalize)(e)},"filter-".concat(t))}))]}),Object(w.jsxs)(W,{children:[Object(w.jsx)("h5",{children:"Notes:"}),Object(w.jsxs)("ul",{children:[Object(w.jsxs)("li",{children:["To get directions, click any restaurants, and click the direction icon. ",Object(w.jsx)("br",{}),"You should allow the your browser to access your location first for the Directions to work."]}),Object(w.jsx)("li",{children:"There are no configured database for this project so plotted restaurants are not persisted anywhere."})]})]}),Object(w.jsxs)("div",{style:{paddingRight:8,paddingLeft:8},children:[Object(w.jsx)("h5",{children:"Misc"}),Object(w.jsx)(x.a,{style:{width:"100%"},unelevated:!0,disabled:H,onClick:Se,icon:H&&Object(w.jsx)(x.c,{}),children:"Show Restaurants in Cebu"}),Object(w.jsx)(x.a,{style:{width:"100%"},onClick:function(){de.setMap(null)},children:"Clear any existing Directions Overlay"})]})]}),Object(w.jsx)(N,{open:E,location:G,mapsApi:s,onRegisterRestaurant:function(e){y([].concat(Object(u.a)(m),[e]))},onClose:function(){P(!1)}})]})}var Z,q,H,Q,Y=h.a.div(P||(P=Object(p.a)(["\n  display: flex;\n  align-items: stretch;\n"]))),X=h.a.button(V||(V=Object(p.a)(["\n  width: 26px;\n  border-top-left-radius: 4px;\n  border-bottom-left-radius: 4px;\n  border: 0;\n  cursor: pointer;\n  transition: 0.3s ease;\n\n  &:hover {\n    background: #6200ee;\n    color: white;\n  }\n"]))),$=h.a.span(B||(B=Object(p.a)(["\n  box-sizing: border-box;\n  flex: 1;\n  padding: 0 8px;\n  background: white;\n  border: 1px solid #ccc;\n"]))),ee=h.a.button(G||(G=Object(p.a)(["\n  width: 24px;\n  border-top-right-radius: 4px;\n  border-bottom-right-radius: 4px;\n  border: 0;\n  cursor: pointer;\n  transition: 0.3s ease;\n\n  &:hover {\n    background: #6200ee;\n    color: white;\n  }\n"])));function te(e){var t=e.value,n=e.onValueChange,a=Object(c.useState)(t),i=Object(b.a)(a,2),r=i[0],o=i[1];Object(c.useEffect)((function(){o(t)}),[t]),Object(c.useEffect)((function(){n&&n(r)}),[n,r]);return Object(w.jsxs)(Y,{children:[Object(w.jsx)(X,{onClick:function(e){e.stopPropagation(),e.preventDefault(),o(r-1)},children:"-"}),Object(w.jsx)($,{children:r}),Object(w.jsx)(ee,{onClick:function(e){e.stopPropagation(),e.preventDefault(),o(r+1)},children:"+"})]})}var ne=h.a.div(Z||(Z=Object(p.a)(["\n  margin-left: -24px;\n  margin-top: -36px;\n"]))),ae=h.a.div(q||(q=Object(p.a)(["\n  width: 250px;\n  background: white;\n  border-radius: 3px;\n  padding: 8px;\n"]))),ce=h.a.div(H||(H=Object(p.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: stretch;\n"]))),ie=h.a.div(Q||(Q=Object(p.a)(["\n  display: flex;\n  flex-direction: row-reverse;\n  align-items: center;\n"])));function re(e){var t=e.restaurant,n=e.onDirectionClick,a=e.onVisitChange,i=Object(c.useState)(!1),r=Object(b.a)(i,2),o=r[0],s=r[1];return Object(w.jsx)(ne,{onClick:function(e){e.stopPropagation()},children:Object(w.jsxs)(x.k,{children:[Object(w.jsx)(x.j,{open:o,onClose:function(){return s(!1)},children:Object(w.jsxs)(ae,{children:[Object(w.jsxs)(ce,{children:[Object(w.jsx)(x.m,{use:"headline6",children:t.name}),Object(w.jsx)("div",{style:{flex:1}}),Object(w.jsx)(x.i,{icon:"assistant_direction",onClick:function(){n(t),s(!1)}}),Object(w.jsx)(x.i,{icon:"close",onClick:function(){return s(!1)}})]}),Object(w.jsxs)(ie,{children:[Object(w.jsx)(te,{value:t.visits||0,onValueChange:function(e){if(a)return a(e,t.placeId)}}),Object(w.jsxs)(x.m,{use:"subtitle2",style:{marginRight:8},children:["Visits:"," "]})]}),Object(w.jsx)("hr",{}),t.specialties&&t.specialties.length>0&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(x.m,{use:"subtitle2",children:["Specialty: ",t.specialties.join(", ")]}),Object(w.jsx)("br",{})]}),Object(w.jsx)(x.m,{use:"caption",style:{paddingTop:16},children:t.address})]})}),Object(w.jsx)(x.i,{icon:"place",style:{color:"#ea4335"},onClick:function(e){e.stopPropagation(),s(!o)}})]})})}function oe(){return Object(w.jsx)(U,{})}var se=function(){return Object(w.jsx)("div",{className:"App",children:Object(w.jsx)(oe,{})})};o.a.render(Object(w.jsx)(i.a.StrictMode,{children:Object(w.jsx)(se,{})}),document.getElementById("root"))},83:function(e,t,n){}},[[167,1,2]]]);
//# sourceMappingURL=main.ce0bfe6b.chunk.js.map