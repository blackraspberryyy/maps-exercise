(this["webpackJsonpmaps-exercise"]=this["webpackJsonpmaps-exercise"]||[]).push([[0],{166:function(e,t,n){"use strict";n.r(t);var a,c=n(0),i=n.n(c),r=n(8),o=n.n(r),s=(n(84),n(85),n(18)),l=n.n(s),u=n(19),j=n(7),d=n(24),b=n(6),p=n(9),O=n(50),h=n(10),f=n(45),g=n(5),x=n(28),v=n(22),m=n(49),y=n(2),w=["className","name","onBlur","label","invalid","helpText","changeOptionLabel","changeOptionValue"],C=Object(h.a)(v.a)(a||(a=Object(p.a)(["\n  ","\n"])),(function(e){var t=e.color,n=e.invalid;return"\n    margin-left: 16px;\n    display: inline-block;\n    color: ".concat(n?"red":t,";\n  ")}));var k,S,R,D,L,T=function(e){var t,n=e.className,a=e.name,i=e.onBlur,r=e.label,o=e.invalid,s=e.helpText,l=e.changeOptionLabel,u=e.changeOptionValue,d=Object(x.a)(e,w),p=Object(c.useState)(!1),O=Object(b.a)(p,2),h=O[0],f=O[1];return Object(y.jsxs)("div",{className:n,children:[r&&Object(y.jsx)(C,{use:"caption",color:h?"#6200ee":"#7f7f7f",invalid:o,children:r}),Object(y.jsx)(m.a,Object(j.a)({styles:(t=o,{valueContainer:function(e){return Object(j.a)(Object(j.a)({},e),{},{minHeight:"55px"})},control:function(e,n){return Object(j.a)(Object(j.a)(Object(j.a)({},e),{},{marginRight:8,marginLeft:8},t&&{borderColor:"red",boxShadow:n.menuIsOpen?"0 0 0 1px red inset":"0"}),{},{"&:hover":{borderColor:t?"red":n.isFocused?e.borderColor:"#000000"}})},placeholder:function(e){return Object(j.a)(Object(j.a)({},e),{},{color:t?"red":"#808080"})},menuPortal:function(e){return Object(j.a)(Object(j.a)({},e),{},{zIndex:10})}}),components:{DropdownIndicator:null},menuIsOpen:!1,theme:function(e){return Object(j.a)(Object(j.a)({},e),{},{colors:Object(j.a)(Object(j.a)({},e.colors),{},{primary:"#6200ee",danger:"#b00020"})})},onFocus:function(){return f(!0)},onBlur:function(e){e.target.name=a,i&&i(e),f(!1)},getOptionLabel:function(e){return e[l]},getOptionValue:function(e){return e[u]}},d)),Object(y.jsx)(C,{use:"caption",color:"#7f7f7f",invalid:o,children:s||""})]})},I=["location","mapsApi","onRegisterRestaurant","onClose"],M=h.a.div(k||(k=Object(p.a)(["\n  display: flex;\n  flex-direction: column;\n"])));function A(e){var t=Object(c.useState)(""),n=Object(b.a)(t,2),a=n[0],i=n[1],r=Object(c.useState)(""),o=Object(b.a)(r,2),s=o[0],p=o[1],O=Object(c.useState)([]),h=Object(b.a)(O,2),f=h[0],v=h[1],m=Object(c.useState)(""),w=Object(b.a)(m,2),C=w[0],k=w[1],S=Object(c.useState)(""),R=Object(b.a)(S,2),D=R[0],L=R[1],A=e.location,N=e.mapsApi,E=e.onRegisterRestaurant,P=e.onClose,V=Object(x.a)(e,I);return Object(c.useEffect)((function(){function e(){return(e=Object(d.a)(l.a.mark((function e(){var t,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!N||!A){e.next=8;break}return t=new N.maps.Geocoder,e.next=4,t.geocode({location:{lat:null===A||void 0===A?void 0:A.lat,lng:null===A||void 0===A?void 0:A.lng}});case 4:n=e.sent,a=n.results,k(a[0].formatted_address),L(a[0].place_id);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[A,null===A||void 0===A?void 0:A.lat,null===A||void 0===A?void 0:A.lng,N]),Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(g.c,Object(j.a)(Object(j.a)({onClose:function(e){i(""),v([]),k(""),P&&P(e)}},V),{},{children:[Object(y.jsx)(g.g,{children:"Register Restaurant"}),Object(y.jsx)(g.f,{children:Object(y.jsxs)(M,{children:[Object(y.jsx)(g.k,{name:"name",label:"Name",value:a,onChange:function(e){return i(e.target.value)},outlined:!0,style:{margin:8}}),Object(y.jsx)(T,{isClearable:!0,isMulti:!0,label:"Specialties",placeholder:'Type here then press "tab" key to register specialty',inputValue:s,value:f.map((function(e){return{value:e,label:e}})),onChange:function(e){return v(e)},onInputChange:function(e){p(e)},onKeyDown:function(e){if(s)switch(e.key){case"Tab":p(""),v([].concat(Object(u.a)(f),[s])),e.preventDefault()}},changeOptionLabel:"label",changeOptionValue:"value"}),Object(y.jsxs)("p",{children:[Object(y.jsxs)("span",{children:[Object(y.jsx)("strong",{children:"Address: "})," ",C]}),Object(y.jsx)("br",{})]})]})}),Object(y.jsxs)(g.d,{children:[Object(y.jsx)(g.e,{action:"close",children:"Cancel"}),Object(y.jsx)(g.e,{action:"accept",unelevated:!0,isDefaultAction:!0,onClick:function(){E({name:a,specialties:f,address:C,location:A,visits:0,placeId:D})},children:"Register"})]})]}))})}var N,E,P,V,B={lat:10.3005178,lng:123.8861904},G=h.a.div(S||(S=Object(p.a)(["\n  display: flex;\n  height: 100vh;\n"]))),_=h.a.div(R||(R=Object(p.a)(["\n  height: 100%;\n  width: 100%;\n"]))),z=h.a.div(D||(D=Object(p.a)(["\n  width: 500px;\n  background: white;\n  display: flex;\n  flex-direction: column;\n"]))),F=h.a.div(L||(L=Object(p.a)(["\n  padding: 16px;\n"])));function K(e){var t=e.className,n=Object(f.usePosition)(!0),a=n.latitude,i=n.longitude,r=Object(c.useState)(null),o=Object(b.a)(r,2),s=o[0],p=o[1],h=Object(c.useState)([]),x=Object(b.a)(h,2),v=x[0],m=x[1],w=Object(c.useState)([]),C=Object(b.a)(w,2),k=C[0],S=C[1],R=Object(c.useState)(!1),D=Object(b.a)(R,2),L=D[0],T=D[1],I=Object(c.useState)(!1),M=Object(b.a)(I,2),N=M[0],E=M[1],P=Object(c.useState)(null),V=Object(b.a)(P,2),K=V[0],W=V[1],J=Object(c.useState)(!1),U=Object(b.a)(J,2),Z=U[0],q=U[1],H=Object(c.useState)(!1),Q=Object(b.a)(H,2),Y=Q[0],X=Q[1],$=Object(c.useState)(),ee=Object(b.a)($,2),te=ee[0],ne=ee[1],ce=Object(c.useState)(),ie=Object(b.a)(ce,2),re=ie[0],oe=ie[1],se=Object(c.useState)(),le=Object(b.a)(se,2),ue=le[0],je=le[1],de=Object(c.useState)(),be=Object(b.a)(de,2),pe=be[0],Oe=be[1],he=function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s&&s.maps&&te&&(t=s.maps,q(!0),te.textSearch({query:"Restaurants in Cebu City",type:"restaurant"},(function(e,n){var a=[];n===t.places.PlacesServiceStatus.OK&&e.forEach((function(e){a.push(Object(j.a)(Object(j.a)({},e),{},{address:e.formatted_address,name:e.name,location:{lat:e.geometry.location.lat(),lng:e.geometry.location.lng()},placeId:e.place_id}))})),m([].concat(Object(u.a)(v),a)),q(!1)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fe=function(e){if(s&&s.maps&&s.map){ue.setMap(s.map);var t={origin:new s.maps.LatLng(a,i),destination:new s.maps.LatLng(e.location.lat,e.location.lng),travelMode:"DRIVING"};re.route(t,(function(e,t){"OK"===t&&ue.setDirections(e)}))}};Object(c.useEffect)((function(){if(pe&&s&&s.map&&s.maps){var e=s.map,t=s.maps;Y?(pe.setMap(e),t.event.addListener(pe,"overlaycomplete",(function(e){var n=e.overlay.getBounds(),a=v.filter((function(a){return function(a){switch(e.type){case"circle":var c=e.overlay;return n.contains(a)&&t.geometry.spherical.computeDistanceBetween(c.getCenter(),a)<=c.getRadius();case"rectangle":return e.overlay.getBounds().contains(a)}}(new s.maps.LatLng(a.location.lat,a.location.lng))}));S(Object(u.a)(a)),e.overlay.setMap(null)}))):pe.setMap(null)}}),[Y,s,null===s||void 0===s?void 0:s.map,null===s||void 0===s?void 0:s.maps,pe,te,v]);var ge=Y?k:v;return Object(y.jsxs)(G,{className:t,children:[Object(y.jsx)(_,{children:Object(y.jsx)(O.a,{bootstrapURLKeys:{key:"AIzaSyCrWA0GMWAD5vVLl1z6fmwlNgQoTINGm34",libraries:["places","drawing","geometry"]},defaultZoom:14,center:K&&{lat:K.lat,lng:K.lng}||B,onGoogleApiLoaded:function(e){return function(e){if(p(e),e&&e.map&&e.maps){var t=e.map,n=e.maps;ne(new n.places.PlacesService(t)),oe(new n.DirectionsService),je(new n.DirectionsRenderer),Oe(new n.drawing.DrawingManager({drawingMode:n.drawing.OverlayType.CIRCLE,drawingControl:!0,drawingControlOptions:{position:n.ControlPosition.TOP_CENTER,drawingModes:[n.drawing.OverlayType.CIRCLE,n.drawing.OverlayType.RECTANGLE]}}))}}(e)},yesIWantToUseGoogleMapApiInternals:!0,onClick:function(e){L&&(E(!0),W(e))},layerTypes:["TrafficLayer"],options:function(){return{disableDoubleClickZoom:!0}},children:ge&&ge.map((function(e,t){return Object(y.jsx)(ae,{restaurant:e,lat:e.location.lat,lng:e.location.lng,onDirectionClick:fe},"restaurant-"+t)}))})}),Object(y.jsxs)(z,{children:[Object(y.jsxs)(g.a,{unelevated:!L,style:{margin:8},onClick:function(){S([]),X(!1),T(!L)},children:[L?"Turn Off ":"","Plotting Restaruants"]}),L&&Object(y.jsx)(g.l,{use:"caption",style:{textAlign:"center"},children:"To start plotting a restaurant, click anywhere on the map"}),Object(y.jsx)(g.a,{unelevated:!Y,style:{margin:8},onClick:function(){S([]),T(!1),X(!Y)},children:Y?"Toggle off Draw Mode":"Draw Shape"}),Y&&Object(y.jsx)(g.l,{use:"caption",style:{textAlign:"center"},children:"Draw a shape on the map to reveal previously created restaurants"}),Object(y.jsx)("div",{style:{flex:1}}),Object(y.jsxs)(F,{children:[Object(y.jsx)("h5",{children:"Notes:"}),Object(y.jsxs)("ul",{children:[Object(y.jsxs)("li",{children:["To get directions, click any restaurants, and click the direction icon. ",Object(y.jsx)("br",{}),"You should allow the your browser to access your location first for the Directions to work."]}),Object(y.jsx)("li",{children:"There are no configured database for this project so plotted restaurants are not persisted anywhere."})]})]}),Object(y.jsxs)("div",{style:{paddingRight:8,paddingLeft:8},children:[Object(y.jsx)("h5",{children:"Misc"}),Object(y.jsx)(g.a,{style:{width:"100%"},unelevated:!0,disabled:Z,onClick:he,icon:Z&&Object(y.jsx)(g.b,{}),children:"Show Restaurants in Cebu"}),Object(y.jsx)(g.a,{style:{width:"100%"},onClick:function(){ue.setMap(null)},children:"Clear any existing Directions Overlay"})]})]}),Object(y.jsx)(A,{open:N,location:K,mapsApi:s,onRegisterRestaurant:function(e){m([].concat(Object(u.a)(v),[e]))},onClose:function(){E(!1)}})]})}var W,J,U,Z,q=h.a.div(N||(N=Object(p.a)(["\n  display: flex;\n  align-items: stretch;\n"]))),H=h.a.button(E||(E=Object(p.a)(["\n  width: 26px;\n  border-top-left-radius: 4px;\n  border-bottom-left-radius: 4px;\n  border: 0;\n  cursor: pointer;\n  transition: 0.3s ease;\n\n  &:hover {\n    background: #6200ee;\n    color: white;\n  }\n"]))),Q=h.a.span(P||(P=Object(p.a)(["\n  box-sizing: border-box;\n  flex: 1;\n  padding: 0 8px;\n  background: white;\n  border: 1px solid #ccc;\n"]))),Y=h.a.button(V||(V=Object(p.a)(["\n  width: 24px;\n  border-top-right-radius: 4px;\n  border-bottom-right-radius: 4px;\n  border: 0;\n  cursor: pointer;\n  transition: 0.3s ease;\n\n  &:hover {\n    background: #6200ee;\n    color: white;\n  }\n"])));function X(e){var t=e.value,n=e.onValueChange,a=Object(c.useState)(t),i=Object(b.a)(a,2),r=i[0],o=i[1];Object(c.useEffect)((function(){o(t)}),[t]),Object(c.useEffect)((function(){n&&n(r)}),[n,r]);return Object(y.jsxs)(q,{children:[Object(y.jsx)(H,{onClick:function(e){e.stopPropagation(),e.preventDefault(),o(r-1)},children:"-"}),Object(y.jsx)(Q,{children:r}),Object(y.jsx)(Y,{onClick:function(e){e.stopPropagation(),e.preventDefault(),o(r+1)},children:"+"})]})}var $=h.a.div(W||(W=Object(p.a)(["\n  margin-left: -24px;\n  margin-top: -36px;\n"]))),ee=h.a.div(J||(J=Object(p.a)(["\n  width: 250px;\n  background: white;\n  border-radius: 3px;\n  padding: 8px;\n"]))),te=h.a.div(U||(U=Object(p.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: stretch;\n"]))),ne=h.a.div(Z||(Z=Object(p.a)(["\n  display: flex;\n  flex-direction: row-reverse;\n  align-items: center;\n"])));function ae(e){var t=e.restaurant,n=e.onDirectionClick,a=e.onVisitChange,i=Object(c.useState)(!1),r=Object(b.a)(i,2),o=r[0],s=r[1];return Object(y.jsx)($,{onClick:function(e){e.stopPropagation()},children:Object(y.jsxs)(g.j,{children:[Object(y.jsx)(g.i,{open:o,onClose:function(){return s(!1)},children:Object(y.jsxs)(ee,{children:[Object(y.jsxs)(te,{children:[Object(y.jsx)(g.l,{use:"headline6",children:t.name}),Object(y.jsx)("div",{style:{flex:1}}),Object(y.jsx)(g.h,{icon:"assistant_direction",onClick:function(){n(t),s(!1)}}),Object(y.jsx)(g.h,{icon:"close",onClick:function(){return s(!1)}})]}),Object(y.jsxs)(ne,{children:[Object(y.jsx)(X,{value:t.visits||0,onValueChange:function(e){if(a)return a(e,t.placeId)}}),Object(y.jsxs)(g.l,{use:"subtitle2",style:{marginRight:8},children:["Visits:"," "]})]}),Object(y.jsx)("hr",{}),t.specialties&&t.specialties.length>0&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(g.l,{use:"subtitle2",children:["Specialty: ",t.specialties.join(", ")]}),Object(y.jsx)("br",{})]}),Object(y.jsx)(g.l,{use:"caption",style:{paddingTop:16},children:t.address})]})}),Object(y.jsx)(g.h,{icon:"place",style:{color:"#ea4335"},onClick:function(e){e.stopPropagation(),s(!o)}})]})})}function ce(){return Object(y.jsx)(K,{})}var ie=function(){return Object(y.jsx)("div",{className:"App",children:Object(y.jsx)(ce,{})})};o.a.render(Object(y.jsx)(i.a.StrictMode,{children:Object(y.jsx)(ie,{})}),document.getElementById("root"))},84:function(e,t,n){}},[[166,1,2]]]);
//# sourceMappingURL=main.6e97de0e.chunk.js.map