(this["webpackJsonpmaps-exercise"]=this["webpackJsonpmaps-exercise"]||[]).push([[0],{166:function(e,t,n){"use strict";n.r(t);var a,c=n(0),i=n.n(c),r=n(8),o=n.n(r),s=(n(84),n(85),n(18)),l=n.n(s),u=n(19),j=n(7),d=n(24),b=n(6),O=n(10),p=n(50),h=n(11),f=n(45),g=n(5),x=n(28),v=n(22),m=n(49),y=n(2),w=["className","name","onBlur","label","invalid","helpText","changeOptionLabel","changeOptionValue"],C=Object(h.a)(v.a)(a||(a=Object(O.a)(["\n  ","\n"])),(function(e){var t=e.color,n=e.invalid;return"\n    margin-left: 16px;\n    display: inline-block;\n    color: ".concat(n?"red":t,";\n  ")}));var S,k,R,L,T,D=function(e){var t,n=e.className,a=e.name,i=e.onBlur,r=e.label,o=e.invalid,s=e.helpText,l=e.changeOptionLabel,u=e.changeOptionValue,d=Object(x.a)(e,w),O=Object(c.useState)(!1),p=Object(b.a)(O,2),h=p[0],f=p[1];return Object(y.jsxs)("div",{className:n,children:[r&&Object(y.jsx)(C,{use:"caption",color:h?"#6200ee":"#7f7f7f",invalid:o,children:r}),Object(y.jsx)(m.a,Object(j.a)({styles:(t=o,{valueContainer:function(e){return Object(j.a)(Object(j.a)({},e),{},{minHeight:"55px"})},control:function(e,n){return Object(j.a)(Object(j.a)(Object(j.a)({},e),{},{marginRight:8,marginLeft:8},t&&{borderColor:"red",boxShadow:n.menuIsOpen?"0 0 0 1px red inset":"0"}),{},{"&:hover":{borderColor:t?"red":n.isFocused?e.borderColor:"#000000"}})},placeholder:function(e){return Object(j.a)(Object(j.a)({},e),{},{color:t?"red":"#808080"})},menuPortal:function(e){return Object(j.a)(Object(j.a)({},e),{},{zIndex:10})}}),components:{DropdownIndicator:null},menuIsOpen:!1,theme:function(e){return Object(j.a)(Object(j.a)({},e),{},{colors:Object(j.a)(Object(j.a)({},e.colors),{},{primary:"#6200ee",danger:"#b00020"})})},onFocus:function(){return f(!0)},onBlur:function(e){e.target.name=a,i&&i(e),f(!1)},getOptionLabel:function(e){return e[l]},getOptionValue:function(e){return e[u]}},d)),Object(y.jsx)(C,{use:"caption",color:"#7f7f7f",invalid:o,children:s||""})]})},I=["location","mapsApi","onRegisterRestaurant","onClose"],M=h.a.div(S||(S=Object(O.a)(["\n  display: flex;\n  flex-direction: column;\n"])));function A(e){var t=Object(c.useState)(""),n=Object(b.a)(t,2),a=n[0],i=n[1],r=Object(c.useState)(""),o=Object(b.a)(r,2),s=o[0],O=o[1],p=Object(c.useState)([]),h=Object(b.a)(p,2),f=h[0],v=h[1],m=Object(c.useState)(""),w=Object(b.a)(m,2),C=w[0],S=w[1],k=e.location,R=e.mapsApi,L=e.onRegisterRestaurant,T=e.onClose,A=Object(x.a)(e,I);return Object(c.useEffect)((function(){function e(){return(e=Object(d.a)(l.a.mark((function e(){var t,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!R||!k){e.next=7;break}return t=new R.maps.Geocoder,e.next=4,t.geocode({location:{lat:null===k||void 0===k?void 0:k.lat,lng:null===k||void 0===k?void 0:k.lng}});case 4:n=e.sent,a=n.results,S(a[0].formatted_address);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[k,null===k||void 0===k?void 0:k.lat,null===k||void 0===k?void 0:k.lng,R]),Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(g.c,Object(j.a)(Object(j.a)({onClose:function(e){i(""),v([]),S(""),T&&T(e)}},A),{},{children:[Object(y.jsx)(g.g,{children:"Register Restaurant"}),Object(y.jsx)(g.f,{children:Object(y.jsxs)(M,{children:[Object(y.jsx)(g.k,{name:"name",label:"Name",value:a,onChange:function(e){return i(e.target.value)},outlined:!0,style:{margin:8}}),Object(y.jsx)(D,{isClearable:!0,isMulti:!0,label:"Specialties",placeholder:'Type here then press "tab" key to register specialty',inputValue:s,value:f.map((function(e){return{value:e,label:e}})),onChange:function(e){return v(e)},onInputChange:function(e){O(e)},onKeyDown:function(e){if(s)switch(e.key){case"Tab":O(""),v([].concat(Object(u.a)(f),[s])),e.preventDefault()}},changeOptionLabel:"label",changeOptionValue:"value"}),Object(y.jsxs)("p",{children:[Object(y.jsxs)("span",{children:[Object(y.jsx)("strong",{children:"Address: "})," ",C]}),Object(y.jsx)("br",{})]})]})}),Object(y.jsxs)(g.d,{children:[Object(y.jsx)(g.e,{action:"close",children:"Cancel"}),Object(y.jsx)(g.e,{action:"accept",unelevated:!0,isDefaultAction:!0,onClick:function(){L({name:a,specialties:f,address:C,location:k,visits:0})},children:"Register"})]})]}))})}var N,E,P,B={lat:10.3005178,lng:123.8861904},G=h.a.div(k||(k=Object(O.a)(["\n  display: flex;\n  height: 100vh;\n"]))),V=h.a.div(R||(R=Object(O.a)(["\n  height: 100%;\n  width: 100%;\n"]))),_=h.a.div(L||(L=Object(O.a)(["\n  width: 500px;\n  background: white;\n  display: flex;\n  flex-direction: column;\n"]))),F=h.a.div(T||(T=Object(O.a)(["\n  padding: 16px;\n"])));function K(e){var t=e.className,n=Object(c.useState)(null),a=Object(b.a)(n,2),i=a[0],r=a[1],o=Object(c.useState)([]),s=Object(b.a)(o,2),O=s[0],h=s[1],x=Object(c.useState)([]),v=Object(b.a)(x,2),m=v[0],w=v[1],C=Object(c.useState)(!1),S=Object(b.a)(C,2),k=S[0],R=S[1],L=Object(c.useState)(!1),T=Object(b.a)(L,2),D=T[0],I=T[1],M=Object(c.useState)(null),N=Object(b.a)(M,2),E=N[0],P=N[1],K=Object(c.useState)(!1),z=Object(b.a)(K,2),W=z[0],J=z[1],q=Object(c.useState)(!1),H=Object(b.a)(q,2),Q=H[0],Y=H[1],Z=Object(c.useState)(),X=Object(b.a)(Z,2),$=X[0],ee=X[1],te=Object(c.useState)(),ne=Object(b.a)(te,2),ae=ne[0],ce=ne[1],ie=Object(c.useState)(),re=Object(b.a)(ie,2),oe=re[0],se=re[1],le=Object(c.useState)(),ue=Object(b.a)(le,2),je=ue[0],de=ue[1],be=Object(f.usePosition)(!0),Oe=be.latitude,pe=be.longitude,he=function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i&&i.maps&&$&&(t=i.maps,J(!0),$.textSearch({query:"Restaurants in Cebu City",type:"restaurant"},(function(e,n){var a=[];n===t.places.PlacesServiceStatus.OK&&e.forEach((function(e){a.push(Object(j.a)(Object(j.a)({},e),{},{address:e.formatted_address,name:e.name,location:{lat:e.geometry.location.lat(),lng:e.geometry.location.lng()},placeId:e.place_id}))})),h([].concat(Object(u.a)(O),a)),J(!1)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fe=function(e){if(i&&i.maps&&i.map){oe.setMap(i.map);var t={origin:new i.maps.LatLng(Oe,pe),destination:new i.maps.LatLng(e.location.lat,e.location.lng),travelMode:"DRIVING"};ae.route(t,(function(e,t){"OK"===t&&oe.setDirections(e)}))}};Object(c.useEffect)((function(){if(je&&i&&i.map&&i.maps){var e=i.map,t=i.maps;Q?(je.setMap(e),t.event.addListener(je,"overlaycomplete",(function(e){var n=e.overlay.getBounds(),a=O.filter((function(a){return function(a){switch(e.type){case"circle":var c=e.overlay;return n.contains(a)&&t.geometry.spherical.computeDistanceBetween(c.getCenter(),a)<=c.getRadius();case"rectangle":return e.overlay.getBounds().contains(a)}}(new i.maps.LatLng(a.location.lat,a.location.lng))}));w(Object(u.a)(a)),e.overlay.setMap(null)}))):je.setMap(null)}}),[Q,i,null===i||void 0===i?void 0:i.map,null===i||void 0===i?void 0:i.maps,je,$,O]);var ge=Q?m:O;return Object(y.jsxs)(G,{className:t,children:[Object(y.jsx)(V,{children:Object(y.jsx)(p.a,{bootstrapURLKeys:{key:"AIzaSyCrWA0GMWAD5vVLl1z6fmwlNgQoTINGm34",libraries:["places","drawing","geometry"]},defaultZoom:14,center:E&&{lat:E.lat,lng:E.lng}||B,onGoogleApiLoaded:function(e){return function(e){if(r(e),e&&e.map&&e.maps){var t=e.map,n=e.maps;ee(new n.places.PlacesService(t)),ce(new n.DirectionsService),se(new n.DirectionsRenderer),de(new n.drawing.DrawingManager({drawingMode:n.drawing.OverlayType.CIRCLE,drawingControl:!0,drawingControlOptions:{position:n.ControlPosition.TOP_CENTER,drawingModes:[n.drawing.OverlayType.CIRCLE,n.drawing.OverlayType.RECTANGLE]}}))}}(e)},yesIWantToUseGoogleMapApiInternals:!0,onClick:function(e){k&&(I(!0),P(e))},layerTypes:["TrafficLayer"],children:ge&&ge.map((function(e,t){return Object(y.jsx)(U,{restaurant:e,lat:e.location.lat,lng:e.location.lng,onDirectionClick:fe},"restaurant-"+t)}))})}),Object(y.jsxs)(_,{children:[Object(y.jsxs)(g.a,{unelevated:!k,style:{margin:8},onClick:function(){w([]),Y(!1),R(!k)},children:[k?"Turn Off ":"","Plotting Restaruants"]}),k&&Object(y.jsx)(g.l,{use:"caption",style:{textAlign:"center"},children:"To start plotting a restaurant, click anywhere on the map"}),Object(y.jsx)(g.a,{unelevated:!Q,style:{margin:8},onClick:function(){w([]),R(!1),Y(!Q)},children:Q?"Toggle off Draw Mode":"Draw Shape"}),Q&&Object(y.jsx)(g.l,{use:"caption",style:{textAlign:"center"},children:"Draw a shape on the map to reveal previously created restaurants"}),Object(y.jsx)("div",{style:{flex:1}}),Object(y.jsxs)(F,{children:[Object(y.jsx)("h5",{children:"Notes:"}),Object(y.jsxs)("ul",{children:[Object(y.jsxs)("li",{children:["To get directions, click any restaurants, and click the direction icon. ",Object(y.jsx)("br",{}),"You should allow the your browser to access your location first for the Directions to work."]}),Object(y.jsx)("li",{children:"There are no configured database for this project so plotted restaurants are not persisted anywhere."})]})]}),Object(y.jsxs)("div",{style:{paddingRight:8,paddingLeft:8},children:[Object(y.jsx)("h5",{children:"Misc"}),Object(y.jsx)(g.a,{style:{width:"100%"},unelevated:!0,disabled:W,onClick:he,icon:W&&Object(y.jsx)(g.b,{}),children:"Show Restaurants in Cebu"}),Object(y.jsx)(g.a,{style:{width:"100%"},onClick:function(){oe.setMap(null)},children:"Clear any existing Directions Overlay"})]})]}),Object(y.jsx)(A,{open:D,location:E,mapsApi:i,onRegisterRestaurant:function(e){h([].concat(Object(u.a)(O),[e]))},onClose:function(){I(!1)}})]})}var z=h.a.div(N||(N=Object(O.a)(["\n  margin-left: -24px;\n  margin-top: -36px;\n"]))),W=h.a.div(E||(E=Object(O.a)(["\n  width: 250px;\n  background: white;\n  border-radius: 3px;\n  padding: 8px;\n"]))),J=h.a.div(P||(P=Object(O.a)(["\n  display: flex;\n  align-items: stretch;\n  justify-content: stretch;\n"])));function U(e){var t=e.restaurant,n=e.onDirectionClick,a=Object(c.useState)(!1),i=Object(b.a)(a,2),r=i[0],o=i[1];return Object(y.jsx)(z,{onClick:function(e){e.stopPropagation()},children:Object(y.jsxs)(g.j,{children:[Object(y.jsx)(g.i,{open:r,onClose:function(){return o(!1)},children:Object(y.jsxs)(W,{children:[Object(y.jsxs)(J,{children:[Object(y.jsx)(g.l,{use:"headline6",children:t.name}),Object(y.jsx)("div",{style:{flex:1}}),Object(y.jsx)(g.h,{icon:"assistant_direction",onClick:function(){n(t),o(!1)}}),Object(y.jsx)(g.h,{icon:"close",onClick:function(){return o(!1)}})]}),Object(y.jsx)("hr",{}),t.specialties&&t.specialties.length>0&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(g.l,{use:"subtitle2",children:["Specialty: ",t.specialties.join(", ")]}),Object(y.jsx)("br",{})]}),Object(y.jsx)(g.l,{use:"caption",style:{paddingTop:16},children:t.address})]})}),Object(y.jsx)(g.h,{icon:"place",style:{color:"#ea4335"},onClick:function(e){e.stopPropagation(),o(!r)}})]})})}function q(){return Object(y.jsx)(K,{})}var H=function(){return Object(y.jsx)("div",{className:"App",children:Object(y.jsx)(q,{})})};o.a.render(Object(y.jsx)(i.a.StrictMode,{children:Object(y.jsx)(H,{})}),document.getElementById("root"))},84:function(e,t,n){}},[[166,1,2]]]);
//# sourceMappingURL=main.ef1078c7.chunk.js.map